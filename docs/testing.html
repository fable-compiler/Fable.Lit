<html class="has-navbar-fixed-top" lang="en"><head><title>Fable.Lit · Testing</title><meta http-equiv="content-type" content="text/html; charset=UTF-8" charSet="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" type="text/css" href="/Fable.Lit/style.css"/><script src="https://unpkg.com/scroll-into-view-if-needed@2.2.28/umd/scroll-into-view-if-needed.min.js"></script></head><body><nav class="navbar is-fixed-top is-spaced"><div class="container"><div class="navbar-brand"><a class="navbar-item title is-4" href="https://fable.io/Fable.Lit/">Fable.Lit</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item is-active is-hidden-mobile" href="/Fable.Lit/docs/getting-started.html">Documentation</a><div class="navbar-item navbar-burger-dots is-hidden-tablet"><svg height="4" stroke="none" viewBox="0 0 22 4" width="22"><circle cx="2" cy="2" r="2"></circle><circle cx="2" cy="2" r="2" transform="translate(9,0)"></circle><circle cx="2" cy="2" r="2" transform="translate(18,0)"></circle></svg></div></div><div class="navbar-end is-hidden-mobile"><a class="navbar-item" href="https://github.com/fable-compiler/Fable.Lit"><span class="icon"><i class=" fab fa-github fa-lg"></i></span></a><a class="navbar-item" href="https://twitter.com/FableCompiler"><span class="icon"><i class=" fab fa-twitter fa-lg"></i></span></a></div></div><div class="nacara-navbar-menu"><a class="nacara-navbar-menu-item" href="/Fable.Lit/docs/getting-started.html">Documentation</a><a class="nacara-navbar-menu-item" href="https://github.com/fable-compiler/Fable.Lit">Github</a><a class="nacara-navbar-menu-item" href="https://twitter.com/FableCompiler">Twitter</a></div></div></nav><div class="grey-overlay"></div><div class="container"><div class="mobile-menu"><nav class="breadcrumb"><ul><li><a class="menu-trigger"><span></span><span></span><span></span></a></li><li class="is-active"><a>Documentation</a></li><li class="is-active"><a>Testing</a></li></ul></nav></div><div class="columns is-gapless is-mobile"><div class="column is-menu-column is-3-desktop is-hidden-touch"><div class="menu-container"><aside class="menu"><ul class="menu-list"><li><li><a class=" " href="/Fable.Lit/docs/getting-started.html">Getting started</a></li></li></ul><ul class="menu-list"><li><li><a class=" " href="/Fable.Lit/docs/templates.html">Templates</a></li></li></ul><ul class="menu-list"><li><li><a class=" " href="/Fable.Lit/docs/hook-components.html">Hook Components</a></li></li></ul><ul class="menu-list"><li><li><a class=" " href="/Fable.Lit/docs/web-components.html">Web Components</a></li></li></ul><ul class="menu-list"><li><li><a class=" " href="/Fable.Lit/docs/hmr.html">Hot Reloading</a></li></li></ul><ul class="menu-list"><li><li><a class=" is-active" href="/Fable.Lit/docs/testing.html">Testing</a></li></li></ul></aside></div></div><div class="column is-8-desktop is-full-touch"><section class="section"><div class="content"><header class="page-header"><div class="columns is-vcentered"><div class="column"><nav class="breadcrumb is-category-navigation is-hidden-touch"><ul><li class="is-active"><a>Documentation</a></li><li class="is-active"><a>Testing</a></li></ul></nav></div><div class="column is-narrow"><a class="button is-hidden-touch is-ghost" target="_blank" href="https://github.com/fable-compiler/Fable.Lit/edit/main/docsrc/docs/testing.md">Edit</a></div></div><h1 class="title is-1">Testing</h1></header><div><style class=grvsc-styles>.grvsc-container{overflow:auto;position:relative;-webkit-overflow-scrolling:touch;padding-top:1rem;padding-top:var(--grvsc-padding-top,var(--grvsc-padding-v,1rem));padding-bottom:1rem;padding-bottom:var(--grvsc-padding-bottom,var(--grvsc-padding-v,1rem));border-radius:8px;border-radius:var(--grvsc-border-radius,8px);font-feature-settings:normal;line-height:1.4}.grvsc-code{display:table}.grvsc-line{display:table-row;box-sizing:border-box;width:100%;position:relative}.grvsc-line>*{position:relative}.grvsc-gutter-pad{display:table-cell;padding-left:.75rem;padding-left:calc(var(--grvsc-padding-left,var(--grvsc-padding-h,1.5rem))/ 2)}.grvsc-gutter{display:table-cell;-webkit-user-select:none;-moz-user-select:none;user-select:none}.grvsc-gutter::before{content:attr(data-content)}.grvsc-source{display:table-cell;padding-left:1.5rem;padding-left:var(--grvsc-padding-left,var(--grvsc-padding-h,1.5rem));padding-right:1.5rem;padding-right:var(--grvsc-padding-right,var(--grvsc-padding-h,1.5rem))}.grvsc-source:empty::after{content:' ';-webkit-user-select:none;-moz-user-select:none;user-select:none}.grvsc-gutter+.grvsc-source{padding-left:.75rem;padding-left:calc(var(--grvsc-padding-left,var(--grvsc-padding-h,1.5rem))/ 2)}.grvsc-has-line-highlighting>.grvsc-code>.grvsc-line::before{content:' ';position:absolute;width:100%}.grvsc-line-diff-add::before{background-color:var(--grvsc-line-diff-add-background-color,rgba(0,255,60,.2))}.grvsc-line-diff-del::before{background-color:var(--grvsc-line-diff-del-background-color,rgba(255,0,20,.2))}.grvsc-line-number{padding:0 2px;text-align:right;opacity:.7}.atom-one-light{background-color:#fafafa;color:#383a42}.atom-one-light .mtki{font-style:italic}.atom-one-light .mtk14{color:#a626a4}.atom-one-light .mtk9{color:#4078f2}.atom-one-light .mtk1{color:#383a42}.atom-one-light .mtk10{color:#50a14f}.atom-one-light .mtk7{color:#a0a1a7}.atom-one-light .mtk5{color:#e45649}.atom-one-light .mtk6{color:#986801}.atom-one-light .mtk8{color:#0184bc}.atom-one-light .grvsc-line-highlighted::before{background-color:var(--grvsc-line-highlighted-background-color,rgba(0,0,0,.05));box-shadow:inset var(--grvsc-line-highlighted-border-width,4px) 0 0 0 var(--grvsc-line-highlighted-border-color,rgba(0,0,0,.2))}</style><p>The <code>Fable.Lit.Test</code> packages contains helpers for easily tests your Lit components following best practices. It's composed of several parts:<ul><li><code>Expect</code>: Assertion helpers that will throw errors compatible with diffing in JS test runners.<li><code>Expect.Dom</code>: Utilities to run tests with DOM elements.<li><code>Expect.Elmish</code>: Utilities to test Elmish apps.<li><code>WebTestRunner</code>: Utilities to write tests for <a href=https://modern-web.dev/docs/test-runner/overview/>Web Test Runner</a>.</ul><p>To access each helper open the corresponding module/namespace. Assertion helpers are always qualified with <code>Expect.</code>:<pre class="atom-one-light grvsc-container"data-index=0 data-language=fsharp><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source><span class=mtk14>module</span><span class=mtk9> TodoTest</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>open</span><span class=mtk1> </span><span class=mtk9>Elmish</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>open</span><span class=mtk1> </span><span class=mtk9>Expect</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>open</span><span class=mtk1> </span><span class=mtk9>Expect.Dom</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>open</span><span class=mtk1> </span><span class=mtk9>Expect.Elmish</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>open</span><span class=mtk1> </span><span class=mtk9>WebTestRunner</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>open</span><span class=mtk1> </span><span class=mtk9>Lit.TodoMVC.App</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>describe </span><span class=mtk10>"Todo"</span><span class=mtk1> </span><span class=mtk14>&#60|</span><span class=mtk1> </span><span class=mtk14>fun</span><span class=mtk1> </span><span class=mtk14>()</span><span class=mtk1> </span><span class=mtk14>-></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    it </span><span class=mtk10>"New todo"</span><span class=mtk1> </span><span class=mtk14>&#60|</span><span class=mtk1> </span><span class=mtk14>fun</span><span class=mtk1> </span><span class=mtk14>()</span><span class=mtk1> </span><span class=mtk14>-></span><span class=mtk1> </span><span class=mtk14>promise {</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class="mtk7 mtki">// Initialize the Elmish app with Program.runTest, this will return a container</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class="mtk7 mtki">// that's also an observable reporting model updates</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk14>use!</span><span class=mtk1> container </span><span class=mtk14>=</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            Program.mkProgram init update view</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            </span><span class=mtk14>|></span><span class=mtk1> Program.mountAndTest</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class="mtk7 mtki">// Get the element from the container and do snapshot testing</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk14>let</span><span class=mtk1> </span><span class=mtk5>el</span><span class=mtk1> </span><span class=mtk14>=</span><span class=mtk1> container.El</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk14>do!</span><span class=mtk1> el </span><span class=mtk14>|></span><span class=mtk1> Expect.matchHtmlSnapshot </span><span class=mtk10>"before new todo"</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class="mtk7 mtki">// We can get the form elements using the aria labels, same way as screen readers will do</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        el.getTextInput</span><span class=mtk14>(</span><span class=mtk10>"New todo description"</span><span class=mtk14>)</span><span class=mtk1>.value </span><span class=mtk14>&#60-</span><span class=mtk1> </span><span class=mtk10>"Elmish test"</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        el.getButton</span><span class=mtk14>(</span><span class=mtk10>"Add new todo"</span><span class=mtk14>)</span><span class=mtk1>.click</span><span class=mtk6>()</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class="mtk7 mtki">// Get the updated model and confirm it contains the new todo uncompleted</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk14>let!</span><span class=mtk1> </span><span class=mtk5>model</span><span class=mtk1> </span><span class=mtk14>=</span><span class=mtk1> container.Await</span><span class=mtk6>()</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk14>let</span><span class=mtk1> </span><span class=mtk5>newTodo</span><span class=mtk1> </span><span class=mtk14>=</span><span class=mtk1> model.Todos </span><span class=mtk14>|></span><span class=mtk1> List.find </span><span class=mtk14>(fun</span><span class=mtk1> t </span><span class=mtk14>-></span><span class=mtk1> t.Description </span><span class=mtk14>=</span><span class=mtk1> </span><span class=mtk10>"Elmish test"</span><span class=mtk14>)</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        newTodo </span><span class=mtk14>|></span><span class=mtk1> Expect.isFalse </span><span class=mtk10>"new todo complete"</span><span class=mtk1> </span><span class=mtk14>(fun</span><span class=mtk1> t </span><span class=mtk14>-></span><span class=mtk1> t.Completed</span><span class=mtk14>)</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class="mtk7 mtki">// Wait until the element is updated</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk14>do!</span><span class=mtk1> elementUpdated el</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk14>do!</span><span class=mtk1> el </span><span class=mtk14>|></span><span class=mtk1> Expect.matchHtmlSnapshot </span><span class=mtk10>"after new todo"</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>}</span></span></span></code></pre><br><p>You can also render Lit components/functions or directly an HTML template, which is useful when testing custom elements.<pre class="atom-one-light grvsc-container"data-index=1 data-language=fsharp><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source><span class=mtk8>[&#60HookComponent>]</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>let</span><span class=mtk1> </span><span class=mtk5>Counter</span><span class=mtk1> </span><span class=mtk6>()</span><span class=mtk1> </span><span class=mtk14>=</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>let</span><span class=mtk1> </span><span class=mtk5>value</span><span class=mtk14>,</span><span class=mtk1> setValue </span><span class=mtk14>=</span><span class=mtk1> Hook.useState </span><span class=mtk6>0</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    html $</span><span class=mtk10>"""</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk10>      &#60div></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk10>        &#60p>Value: {value}&#60/p></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk10>        &#60button @click={Ev(fun _ -> value + 1 |> setValue)}>Increment&#60/button></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk10>        &#60button @click={Ev(fun _ -> value - 1 |> setValue)}>Decrement&#60/button></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk10>      &#60/div></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk10>    """</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk8>[&#60LitElement</span><span class=mtk14>(</span><span class=mtk10>"my-element"</span><span class=mtk14>)</span><span class=mtk8>>]</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>let</span><span class=mtk1> </span><span class=mtk5>DispatchEvents</span><span class=mtk1> </span><span class=mtk6>()</span><span class=mtk1> </span><span class=mtk14>=</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>let</span><span class=mtk1> </span><span class=mtk5>el</span><span class=mtk14>,</span><span class=mtk1> _ </span><span class=mtk14>=</span><span class=mtk1> LitElement.init </span><span class=mtk6>()</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>let</span><span class=mtk1> </span><span class=mtk5>onClick</span><span class=mtk1> _ </span><span class=mtk14>=</span><span class=mtk1> el.dispatchEvent</span><span class=mtk14>(</span><span class=mtk10>"my-event"</span><span class=mtk14>)</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    html $</span><span class=mtk10>"""&#60button @click={onClick}>Click me!&#60/button>"""</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>describe </span><span class=mtk10>"My tests"</span><span class=mtk1> </span><span class=mtk14>&#60|</span><span class=mtk1> </span><span class=mtk14>fun</span><span class=mtk1> </span><span class=mtk14>()</span><span class=mtk1> </span><span class=mtk14>-></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    it </span><span class=mtk10>"counter works"</span><span class=mtk1> </span><span class=mtk14>&#60|</span><span class=mtk1> </span><span class=mtk14>fun</span><span class=mtk1> </span><span class=mtk14>()</span><span class=mtk1> </span><span class=mtk14>-></span><span class=mtk1> </span><span class=mtk14>promise {</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk14>use!</span><span class=mtk1> container </span><span class=mtk14>=</span><span class=mtk1> Counter</span><span class=mtk6>()</span><span class=mtk1> </span><span class=mtk14>|></span><span class=mtk1> render</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk14>let</span><span class=mtk1> </span><span class=mtk5>container</span><span class=mtk1> </span><span class=mtk14>=</span><span class=mtk1> container.El</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        el.getButton</span><span class=mtk14>(</span><span class=mtk10>"increment"</span><span class=mtk14>)</span><span class=mtk1>.click</span><span class=mtk6>()</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        el.getByText</span><span class=mtk14>(</span><span class=mtk10>"value"</span><span class=mtk14>)</span><span class=mtk1> </span><span class=mtk14>|></span><span class=mtk1> Expect.innerText </span><span class=mtk10>"Value: 1"</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        el.getButton</span><span class=mtk14>(</span><span class=mtk10>"decrement"</span><span class=mtk14>)</span><span class=mtk1>.click</span><span class=mtk6>()</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        el.getButton</span><span class=mtk14>(</span><span class=mtk10>"decrement"</span><span class=mtk14>)</span><span class=mtk1>.click</span><span class=mtk6>()</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        el.getByText</span><span class=mtk14>(</span><span class=mtk10>"value"</span><span class=mtk14>)</span><span class=mtk1> </span><span class=mtk14>|></span><span class=mtk1> Expect.innerText </span><span class=mtk10>"Value: -1"</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>}</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    it </span><span class=mtk10>"my-element works"</span><span class=mtk1> </span><span class=mtk14>&#60|</span><span class=mtk1> </span><span class=mtk14>fun</span><span class=mtk1> </span><span class=mtk14>()</span><span class=mtk1> </span><span class=mtk14>-></span><span class=mtk1> </span><span class=mtk14>promise {</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk14>use!</span><span class=mtk1> container </span><span class=mtk14>=</span><span class=mtk1> render</span><span class=mtk14>_</span><span class=mtk1>html $</span><span class=mtk10>"""&#60my-element>&#60/my-element>"""</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk14>let</span><span class=mtk1> </span><span class=mtk5>container</span><span class=mtk1> </span><span class=mtk14>=</span><span class=mtk1> container.El</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk14>do!</span><span class=mtk1> el </span><span class=mtk14>|></span><span class=mtk1> Expect.dispatch </span><span class=mtk10>"my-event"</span><span class=mtk1> </span><span class=mtk14>(fun</span><span class=mtk1> _ </span><span class=mtk14>-></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            el.shadowRoot.getButton</span><span class=mtk14>(</span><span class=mtk10>"click"</span><span class=mtk14>)</span><span class=mtk1>.click</span><span class=mtk14>())</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>}</span></span></span></code></pre><h2 id=accessible-queries>Accessible queries<a href=#accessible-queries aria-hidden=true tabindex=-1><span class=[anchor]></span>#</a></h2><p>Writing tests that find elements in your UI is a great opportunity to put you in the shoes of a screen-reader user. Popularized by the <a href=https://testing-library.com/>Testing Library</a>, <a href=https://testing-library.com/docs/queries/about#priority>accessible queries</a> are a way to make sure your tests find elements in your UI the same way screen-readers do.<ul><li><code>getByText(pattern): HTMLElement</code>: The given pattern becomes an ignore-case regular expression.<li><code>getByRole(role, accessibleName): Element</code>: Query every element exposed in the accessibility tree. The given accessibleName becomes an ignore-case regular expression.</ul><p>The following shortcuts for common roles are provided:<ul><li><code>getButton(accessibleName): HTMLButtonElement</code><li><code>getCheckbox(accessibleName): HTMLInputElement</code><li><code>getTextInput(accessibleName): HTMLInputElement</code></ul><h2 id=web-test-runner>Web Test Runner<a href=#web-test-runner aria-hidden=true tabindex=-1><span class=[anchor]></span>#</a></h2><p>Except for <code>WebTestRunner</code> module, the other helpers can be run with any test runner that provides a DOM. We recommend <a href=https://modern-web.dev/docs/test-runner/overview/>Web Test Runner</a> because it's compatible with ES modules and runs your tests in a headless browser by default instead of node. Web Test Runner provides the same <a href=https://mochajs.org/#interfaces>BDD interface as Mocha</a> and allows you to <a href=https://modern-web.dev/docs/test-runner/commands/>execute commands</a> to interact with the browser instance or the file system. At the time of writing Fable.Lit.Tests includes helpers for snapshot testing.<h2 id=snapshot-testing>Snapshot testing<a href=#snapshot-testing aria-hidden=true tabindex=-1><span class=[anchor]></span>#</a></h2><p>Snapshot testing is helpful to make sure your UI doesn't change unintentionally. If no snapshot has been created for the specific file/name pair a new one will just be saved. Next time the given content will be compared with the stored snapshot and assertion will fail if they don't match.<pre class="atom-one-light grvsc-container"data-index=2 data-language=fsharp><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source><span class=mtk1>it </span><span class=mtk10>"snapshots"</span><span class=mtk1> </span><span class=mtk14>&#60|</span><span class=mtk1> </span><span class=mtk14>fun</span><span class=mtk1> </span><span class=mtk14>()</span><span class=mtk1> </span><span class=mtk14>-></span><span class=mtk1> </span><span class=mtk14>promise {</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>use!</span><span class=mtk1> el </span><span class=mtk14>=</span><span class=mtk1> render</span><span class=mtk14>_</span><span class=mtk1>html $</span><span class=mtk10>"&#60my-element>&#60/my-element>"</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>return!</span><span class=mtk1> el.El </span><span class=mtk14>|></span><span class=mtk1> Expect.matchHtmlSnapshot </span><span class=mtk10>"my-element"</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>}</span></span></span></code></pre><br><p>If you have changed the UI intentionally you can update the snapshots with the self-telling <code>--update-snapshots</code> argument.<pre class="atom-one-light grvsc-container"data-index=3 data-language><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source>npm test -- --update-snapshots</span></span></code></pre><br><p>The main caveat is at the time of writing Web Test Runner doesn't support configuring the directory for snapshots and they will be placed next to the test files. This can be problematic if you're outputting the compiled JS files to a gitignored folder. In this case, you need to add an exception to make sure git checks the snapshots:<pre class="atom-one-light grvsc-container"data-index=4 data-language><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source># .gitignore</span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source>build/client/*</span></span>
<span class=grvsc-line><span class=grvsc-source>build/test/*</span></span>
<span class=grvsc-line><span class=grvsc-source>!build/test/__snapshots__</span></span></code></pre></div></div></section><div class="section bd-docs-pagination bd-pagination-links"><a class="button bd-fat-button is-primary is-light bd-pagination-prev" href="/Fable.Lit/docs/hmr.html"><i>←</i><span class="is-hidden-mobile"><em></em><strong>Hot Reloading</strong></span></a><button class="button navigate-to-next is-invisible"></button></div></div></div></div><script async="" src="/Fable.Lit/resources/nacara-standard-layouts/scripts/menu.js"></script></body></html>